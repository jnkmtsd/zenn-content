---
title: "バックエンドエンジニアのためのネットワーク基礎【ハブ編】"
emoji: "🌐"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["ネットワーク", "ハブ", "スイッチングハブ"]
published: true
---

## はじめに

本シリーズの執筆意図などは本シリーズ初回の記事に書いてあります。

- [初回のブラウザ編 > ネットワーク知識の重要性](https://zenn.dev/jnkmtsd/articles/0d129a7aa0947b#%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E7%9F%A5%E8%AD%98%E3%81%AE%E9%87%8D%E8%A6%81%E6%80%A7)
- [初回のブラウザ編 > ネットワーク知識を記憶することの困難性](https://zenn.dev/jnkmtsd/articles/0d129a7aa0947b#%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E7%9F%A5%E8%AD%98%E3%82%92%E8%A8%98%E6%86%B6%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%81%AE%E5%9B%B0%E9%9B%A3%E6%80%A7)
- [初回のブラウザ編 > 困難性とどう向き合うか](https://zenn.dev/jnkmtsd/articles/0d129a7aa0947b#%E5%9B%B0%E9%9B%A3%E6%80%A7%E3%81%A8%E3%81%A9%E3%81%86%E5%90%91%E3%81%8D%E5%90%88%E3%81%86%E3%81%8B)

### 本シリーズの記事一覧

- [バックエンドエンジニアのためのネットワーク基礎【ブラウザ編】](https://zenn.dev/jnkmtsd/articles/0d129a7aa0947b)
- [バックエンドエンジニアのためのネットワーク基礎【DNS サーバー編】](https://zenn.dev/jnkmtsd/articles/e59e42beec39e0)
- [バックエンドエンジニアのためのネットワーク基礎【プロトコル・スタック TCP 接続編】](https://zenn.dev/jnkmtsd/articles/e0ecb28f1875f2)
- [バックエンドエンジニアのためのネットワーク基礎【プロトコル・スタック TCP 送受信編】](https://zenn.dev/jnkmtsd/articles/37a25508b30635)
- [バックエンドエンジニアのためのネットワーク基礎【プロトコル・スタック IP 編】](https://zenn.dev/jnkmtsd/articles/61f104becc1750)
- [バックエンドエンジニアのためのネットワーク基礎【イーサネット編】](https://zenn.dev/jnkmtsd/articles/c50f9113995773)
- [バックエンドエンジニアのためのネットワーク基礎【プロトコル・スタック UDP 編】](https://zenn.dev/jnkmtsd/articles/46615811cadd72)
- バックエンドエンジニアのためのネットワーク基礎【ハブ編】　 ← 本記事
- [バックエンドエンジニアのためのネットワーク基礎【ルーター編】](https://zenn.dev/jnkmtsd/articles/e11381c0cafe3e)

### 本記事で書かないこと

- ハブ以外の動作
  - 例）LAN アダプタ、ネットワーク・アプリケーション　など
- プロトコルなどの詳しい仕様

## 全体像

[前々回のイーサネット編 > 全体像](https://zenn.dev/jnkmtsd/articles/c50f9113995773#%E5%85%A8%E4%BD%93%E5%83%8F)の中の、以下赤枠で示した箇所を細分化していきます。

![](https://storage.googleapis.com/zenn-user-upload/13fd5f1145bd-20231221.png)

それが以下です。

![](https://storage.googleapis.com/zenn-user-upload/ed7bee136b29-20231221.png)

(1)〜(3)の順にパケットが流れます。
数字をふっていない部分にはパケットは基本的に流れません。
(1)で結ばれている PC からパケットを送るものとします。

## リピーター・ハブ

リピーター・ハブは、**入力信号を受信ポート以外の全ポートに出力する機器**です。

(2)で示した部分にパケットを流します。
信号を受信した機器は、先頭にある MAC ヘッダーに書いてある宛先 MAC アドレスを調べ、自分が宛先に該当すればそれを受信します。
該当しなければ受信した信号を無視します。
今回は宛先がルーターなので、(2)で結ばれている PC は信号を無視します。

## スイッチング・ハブ

スイッチング・ハブは、*パケットを中継する機器*です。

スイッチング・ハブの各ポートは PC の LAN アダプタとほぼ同じですが、MAC アドレスが割り当てられていないという点が異なります。

MAC アドレス・テーブルというものを使って、目的地に該当するポートにパケットを送ります。
それを示したのが(3)です。

MAC アドレス・テーブルは、MAC アドレスとポート番号の対応表です。
イーサネットのパケットには宛先 MAC アドレスが書いてあるので、それを見て MAC アドレス・テーブルを参照します。

:::message
MAC アドレス・テーブルに登録されている送信ポートがパケットを受信したポートと同じだったとき、そのパケットは中継せず棄てます。
:::

MAC アドレス・テーブルに情報を登録・更新する方法は次のとおりです。

- パケット受信時に、送信元 MAC アドレスと受信ポート番号の対応を登録する
- 一定時間使われていない MAC アドレスとポート番号の対応を削除する
- 物理的にリセットする

:::message
MAC アドレス・テーブルに宛先 MAC アドレスと一致するアドレスが登録されていなかったり、宛先 MAC アドレスがブロードキャスト・アドレスだったりすると、そのパケットは受信ポートを除く全ポートに送信します。
:::

## まとめ

- リピーター・ハブは、入力信号を受信ポート以外の全ポートに出力する機器
- スイッチング・ハブは、MAC アドレス・テーブルを見て、目的地に該当するポートにパケットを送る機器

## 参考

- [ネットワークはなぜつながるのか　第２版](https://www.amazon.co.jp/dp/B077XSB8BS)
