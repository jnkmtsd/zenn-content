---
title: "GitHub の public リポジトリを GitLab の private リポジトリに移動させる方法"
emoji: "💽"
type: "tech"
topics: ["git", "github", "gitlab"]
published: true
---

## はじめに

仕事で必要な作業だったのでやり方をまとめます。
プラットフォームが違うので色々なエラーが出ないか作業前は不安でした。
しかし、意外とすんなり移動できました。

## 前提条件

- GitHub に public リポジトリがある
- GitLab に private リポジトリがある

## 作業内容

### GitLab に SSH キーを登録する

[User Settings > SSH Keys](https://gitlab.com/-/profile/keys) から SSH キーを登録します。
これをしないと、GitLab に push しようとすると permission denied エラーが発生します。

### ローカルに GitHub のリポジトリをクローンする

GitLab に移動したいリポジトリをクローンしておきます。
その際、必要なブランチをローカルにチェックアウトしておきましょう。

### リモートリポジトリを GitHub から GitLab に変更する

前工程でクローンしたリポジトリのリモートリポジトリを変更します。

まずは現状のリモートリポジトリを確認します。

```bash
$ git remote -v

origin	git@github.com:aaaaaa/bbbbbb.git (fetch)
origin	git@github.com:aaaaaa/bbbbbb.git (push)
````

`origin`という名前は移行先の GitLab で使いたいので GitHub 側のリモートリポジトリを変更します。
ここでは仮に`source-origin`という名前にします。

```bash
$ git remote rename origin source-origin
```

問題なく反映されたことを確認します。

```bash
$ git remote -v

source-origin	git@github.com:aaaaaa/bbbbbb.git (fetch)
source-origin	git@github.com:aaaaaa/bbbbbb.git (push)
````

次に GitLab のリモートリポジトリとして`origin`を設定します。

```bash
$ git remote add origin git@gitlab.com:aaaaaa/bbbbbb.git
```

問題なく反映されたことを確認します。

```bash
$ git remote -v

origin	git@gitlab.com:xxxxxxx/yyyyyy.git (fetch)
origin	git@gitlab.com:xxxxxxx/yyyyyy.git (push)
source-origin	git@github.com:aaaaaa/bbbbbb.git (fetch)
source-origin	git@github.com:aaaaaa/bbbbbb.git (push)
```

### GitLab にソースコードを push する

GitLab 側のリポジトリに initial commit などがあったら普通に push できないので force push します。

```bash
$ git push -f origin --all
```

## おわりに

「なんだ、簡単じゃん！」と思ってくれたら書いた価値があります。
最後までご覧いただきありがとうございました。
